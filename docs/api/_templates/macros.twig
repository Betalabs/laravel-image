{%

    macro method_arguments(arguments, with_defaults = true)

        %}{%
            for argument in arguments
                %}{{ argument.name }}{%
                    if with_defaults and argument.default|trim != ''
                        %} = {{ argument.default }}{%
                    endif
                %}{%
                    if loop.index < arguments.count()
                        %}, {%
                    endif
                %}{%
            endfor
        %}{%

    endmacro

%}

{%

    macro method(method, with_defaults = true)
        %}{%
            from _self import method_arguments
        %}{{ method.name }}({{ method_arguments(method.argument, with_defaults) }}){%
    endmacro

%}

{%

    macro tag_description(tag)

        %}{%
            set attributes = tag.attributes()
        %}{%
            set safe_description = attributes.description|striptags|replace({"\n": "", "\r\n": "", "\t": "", "\n\r": ""})|trim
        %}{%
            if safe_description != ''
                %}{{ safe_description }}{%
            endif
        %}{%

    endmacro

%}

{%

    macro method_argument_description(argument, tags)

        %}{%
            from _self import tag_description
        %}{%
            if argument.name|trim != ''
                %}`{{ argument.name }}` {%
            endif
        %}{%
            if argument.type|trim != ''
                %}`({{ argument.type }})` {%
            endif
        %}{%
            for tag in tags
                %}{% set attributes = tag.attributes() %}{%
                    if (
                        attributes.name == 'param' and
                        attributes.variable|trim == argument.name|trim
                    )
                        %}{{ tag_description(tag) }}{%
                    endif
                %}{%
            endfor
        %}{%

    endmacro

%}
